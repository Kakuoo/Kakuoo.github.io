---
layout: post
title: 回车和换行的故事
subtitle: 系统相关名词解释
tags: [Computer System]
comments: true
---

<!-- ## 回车和换行的故事 -->

通常我们总将回车换行混为一谈，但是既然设置为2个，则肯定有其存在的道理，查了一些资料后，本文主要讨论一下回车”（Carriage Return，CR）和“换行”（Line Feed，LF）这两个概念的来历和区别。

| 符号 | ASCii码 | 含义 |
| :--: | :-----: | :--: |
|  \n  |   10    | 换行 |
|  \r  |   13    | 回车 |

在计算机还没有出现之前，有一种叫做电传打字机（Teletype Model，Linux/Unix下的tty概念也来自于此）的东西，每秒钟可以打10个字符。但是它有一个问题，就是打完一行换行的时间要用掉0.2秒，正好可以打两个字符。要是在这0.2秒里面，又有新的字符传过来，那么这个字符将丢失。于是，研制人员想了个办法解决这个问题，就是在每行后面加两个表示结束的字符。一个叫做“回车”，告诉打字机把打印头定位在左边界；另一个叫做“换行”，告诉打字机把纸向下移一行。这就是“换行”和“回车”的来历，从它们的英语名字上也可以看出一二。后来，计算机发明了，这两个概念也就被般到了计算机上。那时，存储器很贵，一些科学家认为在每行结尾加两个字符太浪费了，加一个就可以。于是，就出现了分歧。

 在Windows中：

> '\r' 回车，回到当前行的行首，而不会换到下一行，如果接着输出的话，本行以前的内容会被逐一覆盖；
>
> '\n' 换行，换到当前位置的下一行，而不会回到行首；

在Unix系统中，每行结尾只有`<换行>`，即`\n`；Windows系统里面，每行结尾是`<回车><换行>`，即`\r\n`；Mac系统里，每行结尾是`<回车>`，即`\r`；。

一个直接的后果是，Unix/Mac系统下的文件在Windows里打开的话，所有文字会变成一行；而Windows里的文件在Unix/Mac下打开的话，在每行的结尾可能会多出一个`^M`符号。  

注意：分别在Windws和Linux中查看文件可知:
Linux中遇到换行符`\n`会进行`回车+换行`的操作，`回车符`反而只会作为控制字符`^M`显示，不发生回车的操作。而windows中要`回车符+换行符`即`\r\n`才会`回车+换行`，缺少一个控制符或者顺序不对都不能正确的另起一行。

#### 扩展：硬回车和软回车

硬回车就是普通我们按`Enter`产生的，它在换行的同时也起着段落分隔的作用。 

软回车是用 `Shift + Enter` 产生的，它换行，但是并不换段，即前后两段文字在 Word 中属于同一“段”。在应用格式时你会体会到这一点。

软回车能使前后两行的行间距大幅度缩小，因为它不是段落标记，要和法定的段落标记——硬回车区别出来。硬回车的html代码是`<p>..</p>`，段落的内容就夹在里面，而软回车的代码很精悍：`<br>`。网页的文字如果复制到word中，则硬回车变为弯曲的箭头，软回车变为向下的箭头。
