---
layout: post
title: Linux基础知识手册
subtitle: false
tags: [Linux]
---

<!-- # Linux基础知识速查 -->

* This will become a table of contents (this text will be scraped).
{:toc}

---

## 初识 Linux

- /：根目录，一般根目录只存放目录，linux下有且仅有一个根目录，所有的东西均从这里开始。当在终端输入`/home`，其实是告诉电脑，先从`/`（根目录）开始，再进入到`home`目录

- /bin、/usr/bin：可执行二进制文件目录，如常用命令 ls, tar, mv, cat等

- /boot：放置linux系统启动时用到的一些文件，如linux内核文件：`/boot/vmlinuz`，系统引导管理器：`/boot/grub`

- /dev：存放linux系统下的设备文件，访问该目录下某个文件，相当于访问某个设备，常用的是挂载光驱`mount /dev/cdrom/mnt`

- /etc：系统配置文件存放的目录，不建议在此目录下存放可执行文件，重要的配置文件有
  - /etc/initab
  - /etc/fstab
  - /etc/init.d
  - /etc/X11
  - /etc/sysconfig
  - /etc/xinedtd.d

- /home：系统默认的用户家目录，新增用户账号时，用户的家目录都存放在此目录下
  - `~` 表示当前用户的家目录
  - `~edu`表示用户`edu`的家目录

- /lib /usr/lib /usr/local/lib：系统使用的函数库的目录，程序在执行过程中，需要调用一些额外的参数时需要函数库的协助

- /lost+fount：系统异常产生错误时，会将一些遗失的片段放置于此目录下

- /mnt：光盘默认挂载点，通常光盘挂载与 `/mnt/cdrom`下，也不一定，可以选择任意位置进行挂载

- /opt：给主机额外安装软件所摆放的目录

- /proc：此目录下的数据都在内存中，如系统核心，外部设备，网络状态，由于数据都存放于内存中，所以不占用磁盘空间，比较重要的文件有：/proc/cpuinfo，/proc/dma，/proc/ioports，/proc/net/*等

- /root：系统管理员root的家目录

### linux 图形界面使用

职场中，大量的服务器维护工作需要远程通过SSH客户端使用命令行完成，没有图形界面

### 常用linux命令

Linux的发行版本的命令大概有200多个，但是常用命令只有10多个而已

> 学习终端命令的技巧：
>
> 不需要死记硬背，有些命令是非常不常用的，临时遇到，临时百度就可以

|      命令      |       对应英文       | 作用                     |
| :------------: | :------------------: | :----------------------- |
|       ls       |         list         | 查看当前文件夹下内容     |
|      pwd       | print work directory | 查看当前所在文件夹       |
|  cd [目录名]   |   change directory   | 切换文件目录             |
| touch [目录名] |        touch         | 如果文件不存在，新建文件 |
| mkdir [目录名] |    make directory    | 创建目录                 |
|  rm [目录名]   |        remove        | 删除指定问文件名         |
|     clear      |        clear         | 清屏                     |

> 小技巧：
>
> `ctrl + shift + '='`  放大终端窗口的字体显示
>
> `ctrl + '-' ` 缩小终端窗口的字体显示

### linux 终端命令的格式：

```shell
command [-options] [parameter]
```

command：命令名，相应功能的英文单词或单词的缩写

[-options]：选项，可用来对命令进行控制，也可以省略

parameter：传给命令的参数，可以是零个，一个或多个

> [ ] 表示可选

### 查阅终端命令帮助信息

- --help

```shell
command --help
```

说明：显示`command`命令的帮助信息

- man

```shell
man command
```

说明：查阅`command`命令的使用手册

> `man`是manual的缩写，是Linux提供的一个手册，包含了绝大部分命令，函数的详细使用说明

使用`man`时的操作键：

| 操作键  | 功能                   |
| :-----: | :--------------------- |
| 空格键  | 显示手册页的下一屏     |
| Enter键 | 一次滚动舌手册页的一行 |
|    b    | 回滚一屏               |
|    f    | 前滚一屏               |
|    q    | 退出                   |
|  /word  | 搜索word字符串         |



---

## 文件和目录命令

### 查看目录内容：`ls`

linux下文件和目录的特点

- Linux文件或者目录名称最长可达256个字符
- 以`.`开头的文件为隐藏文件，需要用`-a`参数才能显示
- `.`表示当前目录
- `..`表示上一级目录

类似于DOS下的`dir`命令，常用选项：

| 选项 | 含义                                         |
| :--: | :------------------------------------------- |
|  -a  | 显示指定目录下所有子目录与文件，包括隐藏文件 |
|  -l  | 以列表方式显示文件的详细信息                 |
|  -h  | 配合`-l`以人性化的方式显示文件大小           |

ls通配符的使用：

| 通配符 | 含义                               |
| :----: | ---------------------------------- |
|   *    | 代表任意个数的字符（不论任何字符） |
|   ?    | 代表任意一个字符，至少1个          |
|   []   | 表示可以匹配字符组中的任意一个     |
| [abc]  | 匹配a、b、c中的任意一个            |
| [a-f]  | 匹配从a到f范围内的任意一个         |

### 切换目录：`cd`

> 注意：Linux所有的目录和文件名都是大小写敏感的

| 命令  | 含义                                     |
| :---: | ---------------------------------------- |
|  cd   | 切换到当前用户的主目录（/home/用户目录） |
| cd ~  | 切换到当前用户的主目录（/home/用户目录） |
| cd .  | 保持在当前目录不变                       |
| cd .. | 切换到上级目录                           |
| cd -  | 可以在最近两次工作目录中来回切换         |

**相对路径和绝对路径：**

- 相对路径：在输入路径时，最前面**不是**`/`或者`~`,表示相对 `当前目录` 所在的目录位置
- 绝对路径：在输入路径时，最前面**是**`/`或者`~`,表示相对 `根目录/家目录` 开始的具体目录位置



### 创建和删除操作：`touch`，`mkdir`，`rm`

`touch`：创建文件或修改文件时间

- 如果文件 **不存在** ，可以创建一个空白文件
- 如果文件 **已经存在**，可以修改文件的末次修改日期

`mkdir`：创建一个新的目录

| 选项 | 含义             |
| :--: | ---------------- |
|  -p  | 可以递归创建目录 |

> **新建的目录的名称** 不能与当前目录中 **已有的目录或文件** 同名

`rm`：删除文件或目录

> 使用`rm`命令要小心，因为文件删除后不能回复

| 选项 | 含义                                                  |
| :--: | ----------------------------------------------------- |
|  -f  | 强制删除，忽略不存在的文件，无需提示                  |
|  -r  | 递归的删除目录下的内容，**删除文件夹** 时必须加此参数 |



### 拷贝和移动命令：`tree`，`cp`，`mv`

|        命令        | 对应英文 | 作用                                     |
| :----------------: | :------: | ---------------------------------------- |
|   tree [目录名]    |   tree   | 以树状图列出文件目录结构                 |
| cp 源文件 目标文件 |   copy   | 复制文件或者目录                         |
| mv 源文件 目标文件 |   move   | 移动 文件 或者 目录/文件 或者 目录重命名 |

`tree`：以树状图列出文件目录结构

| 选项 | 含义       |
| :--: | ---------- |
|  -d  | 只显示目录 |

`cp`：将给出的 文件 或 目录 复制到另一个 文件 或 目录 中，相当于DOS下的`copy`命令

| 选项 | 含义                                                         |
| :--: | ------------------------------------------------------------ |
|  -i  | 覆盖文件前提示                                               |
|  -f  | 已经存在的目标文件直接覆盖，不会提示                         |
|  -r  | 若给出的源文件是目录文件，则 cp<br />将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名 |

`mv`：移动 文件 或者 目录/文件 ，也可以给 文件或目录重命名

| 选项 | 含义           |
| :--: | -------------- |
|  -i  | 覆盖文件前提示 |

### 文件内容命令：`cat`，`more`，`grep`

|        命令         |  对应英文   | 作用                                                 |
| :-----------------: | :---------: | ---------------------------------------------------- |
|     cat 文件名      | concatenate | 查看文件内容、创建文件、合并文件、追加文件内容等功能 |
|     more 文件名     |    more     | 分屏显示文件内容                                     |
| grep 搜索文本文件名 |    grep     | 搜索文本文件内容                                     |

`cat`：查看文件内容、创建文件、文件合并、追加文件内容 等功能

会一次显示所有的内容，适合查看内容较少的文本文件

| 选项 | 含义               |
| :--: | ------------------ |
|  -b  | 对非空输出行编号   |
|  -n  | 对输出的所有行编号 |

> Linux中还有一个`nl`的命令和`cat -b`的效果等价

`more`：用于分屏显示文件内容，每次只显示一页的内容

适合于查看内容较多的文本文件

使用`more`的操作键：

| 操作键 | 功能               |
| :----: | ------------------ |
| 空格键 | 显示手册页的下一屏 |
| Enter  | 滚动一行           |
|   b    | 回滚一屏           |
|   f    | 前滚一屏           |
|   q    | 退出               |
| /word  | 搜索word字符串     |

`grep`：Linux系统中grep命令是一种强大的文本搜索工具

grep允许对文本文件进行模式查找，所谓模式查找，又被称为正则表达式

| 选项 | 含义                                     |
| :--: | ---------------------------------------- |
|  -n  | 显示匹配行及行号                         |
|  -v  | 显示不包含匹配文本的所有行（相当于求反） |
|  -i  | 忽略大小写                               |

常用的两种模式查找：

| 参数 | 含义                     |
| :--: | ------------------------ |
|  ^a  | 行首，搜寻以 a 开头的行  |
| ke$  | 行尾，搜寻以 ke 结束的行 |

### 其他命令 echo，重定向> 和>>，管道

**`echo`文字内容**

echo会在终端中显示参数指定的文字，通常会和**重定向**联合使用

**`重定向`** **> 和 />>**

Linux允许将命令执行结果 **重定向** 到一个 **文件**，将本应显示在**终端上的内容** **输出/追加** 到 **指定文件** 中

其中：

- `>` 表示输出，会覆盖文件原有内容
- `>>`表示追加，会将内容追加到已有文件的末尾

**`管道`**

Linux允许将 一个命令的输出 可以通过管道 作为 另一个命令的输入

可以理解为现实生活中的管子，管子的一头塞东西进去，另一头取出来，这里`|` 的左右分为两端，左端塞东西（写），右端取东西（读）

常用的管道命令有：

- more：分屏显示内容
- grep：在命令执行结果的基础上查询指定文本

```shell
#例如：

ls -lha ~ | more
# 分屏显示 ls 家目录下的所有内容

ls -lha ~ | grep Do
# 过滤出ls显示内容中含有Do的内容
```



---

## 远程管理常用命令

### 关机/重启：`shutdown`

|        命令        | 对应英文 | 作用          |
| :----------------: | :------: | ------------- |
| shutdown 选项 时间 | shutdown | 关机/重新启动 |

shutdown命令可以 **安全关闭** 或者 **重新启动系统**

| 选项 | 含义     |
| :--: | -------- |
|  -r  | 重新启动 |

> 提示：
>
> - **不指定选项和参数**，默认表示 **1分钟** 之后 **关闭电脑**
> - 远程维护服务器时，最好不要关闭系统， 而应该重新启动系统

常用命令示例：

```shell
# 重新启动操作系统，其中 now 表示现在
$ shutdown -r now

# 立刻关机，其中 now 表示现在
$ shutdown now

# 系统在今天 20:25 会关机
$ shutdown 20:25

# 系统再过10分钟后自动关机
$ shutdown +10

# 取消之前指定的关机计划
$ shutdown -c
```

### 查看或配置网卡信息：`ifconfig`，`ping`

| 命令        | 对应英文                      | 作用                              |
| ----------- | ----------------------------- | --------------------------------- |
| ifconfig    | configure a network interface | 查看/配置计算机当前的网卡配置信息 |
| ping ip地址 | ping                          | 检测到目标ip地址的连接是否正常    |

网卡和IP地址

网卡：

- 网卡是一个专门负责网络通讯的硬件设备
- IP地址是设置在网卡上的地址信息

> 我们可以把电脑比作电话，网卡相当于SIM卡，IP地址相当于电话号码

IP地址：

每台联网的电脑上都有IP地址，是保证电脑之间正常通讯的重要设置

> 注意：每台电脑的IP地址不能相同，否则会出现IP地址冲突，并且没有办法正常通讯

**ifconfig** ：

可以查看/配置计算机当前的网卡配置信息

```shell
# 查看网卡配置信息
$ ifconfig

# 查看网卡对应的IP地址
$ ifconfig | grep inet
```

> 提示：一台计算机中有可能会有一个物理网卡和多个虚拟网卡，在Linux中物理网卡的名字通常以ensXX表示
>
> `127.0.0.1` 被称为 **本地回环/环回地址**，一般用来测试本机网卡是否正常

**ping**：

一般用于检测当前计算机到目标计算机之间的网络 **是否通畅，数值越大，速度越慢**

> - `ping`的工作原理与潜水艇的声呐相似，`ping`这个命令就是取自声呐的声音
> - 网络管理员之间也常将`ping`用作动词——`ping` 一下计算机X，看他是否开着

```shell
# 检测到目标主机是否连接正常
$ ping IP地址

# 检测本地网卡是否正常
$ ping 127.0.0.1
```

原理：网络上的机器都有 唯一确定的IP地址，我们给目标IP地址发送一个数据包，对方就要返回一个数据包，根据返回的数据包以及时间，我们可以确定目标主机的存在

> 提示：在Linux中，想要终止一个终端程序的执行，绝大多数时候都可以使用`CTRL + C`

### 远程登录和复制文件：`ssh`，`scp`

| 命令                                                | 对应英文     | 作用          |
| --------------------------------------------------- | ------------ | ------------- |
| ssh 用户名@ip                                       | secure shell | 关机/重新启动 |
| scp 用户名@ip:文件名或路径   用户名@ip:文件名或路径 | secure copy  | 远程复制文件  |

**SSH基础**

在Linux中SSH是非常常用的工具，通过SSH客户端 我们可以连接到运行了SSH服务器的远程机器上

- SSH客户端是一种使用`Secure Shell（SSH）`协议连接到远程计算机的软件程序
- `SSH`是目前较可靠，专为远程登录会话和其他网络服务 提供安全性的协议

  - 利用SSH协议可以有效防止远程管理过程中的信息泄露

  - 通过SSH协议可以对所有传输的数据进行加密，也能够防止DNS欺骗和IP欺骗
- SSH的另一项优点是传输的数据可以使经过压缩的，所以可以加快传输的速度

域名和端口号：

域名：由一串用点分隔的名字组成，例如：www.xxx.cn，是**IP地址的别名**，方便用户记忆

端口号：

- IP地址：通过**IP地址**找到网络上的**计算机**

- 端口号：通过**端口号**可以找到**计算机上运行的应用程序**

  - SSH的服务器的默认端口号是`22`，如果是默认端口号，在连接的时候，可以省略

- 常见服务端口号列表：   

|   服务    | 端口号 |
| :-------: | :----: |
| SSH服务器 |   22   |
| Web服务器 |   80   |
|   HTTPS   |  443   |
| FTP服务器 |   21   |

> 通常访问网络服务器的流程：
>
> 通过IP地址找到计算机，再通过端口号找到计算机上安装的程序 ，用户才能看到正常的网络访问

SSH客户端的简单实用：

```shell
ssh [-p port] user@remote
```

- `user`：是在远程机器上的用户名，如果不指定的话默认为当前用户
- `remote`：是远程机器的地址， 可以是**IP/域名**，或者是**后面会提到的别名**
- `port`：是**SSH Server监听的端口**，如果不指定，就为默认值`22`

> 提示：实用 `exit` 退出当前用户的登录
>
> 注意：
>
> - `ssh` 这个终端命令只能在`Linux` 或者`UNIX`系统下使用
> - 如果在 `windows`系统中，可以安装`PuTTY`或者`XShell`客户端软件即可
>
> 提示：在工作中，SSH服务器的端口号很有可能**不是22**，如果遇到这种情况就需要使用`-p`选项，指定正确的端口号，否则无法正常连接到服务器

**scp**

- scp就是secure copy，是一个在Linux下用来进行**远程拷贝文件**的命令
- 它的**地址格式与ssh基本相同**，**需要注意的是**，在指定端口时用的是大写的-P而不是小写的

| 选项 | 含义                                                         |
| :--: | ------------------------------------------------------------ |
|  -r  | 若给出的源文件是目录文件，则scp将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名 |
|  -P  | 若远程SSH服务器的端口不是22，需要使用大写字母-P选项指定端口  |

```shell
# 把本地当前目录下的 01.py文件 复制到 远程 家目录下的Desktop/01.py
# 注意：`:`后面的路径如果不是绝对路径，则以用户的家目录作为参照路径
$ scp -P port 01.py user@remote:Desktop/01.py

# 把远程家目录下的Desktop/01.py文件复制到 本地当前目录下的 01.py
$ scp - P port user@remote:Desktop/01.py 01.py

# 加上 -r 选项，可以传送文件夹
$ scp -r demo user@remote:Desktop

# 把远程家目录下的Desktop 复制到 当前目录下的 demo文件夹
$ scp -r user@remote:Desktop demo
```

> 注意：
>
> - `scp`这个终端命令只能在`Linux`或者`UNIX`系统下使用
> - 如果在`windows`系统中，可以安装`PuTTY`，使用`pscp`命令行工具或者安装`FileZilla`使用`FTP`进行文件传输

**FileZilla**：[官方网站](http://www.filezilla.cn/download/client)

`FileZilla`在传输文件时，使用的是`FTP服务`而不是`SSH服务`，因此端口号应该设置为`21`

**SSH高级**

- 免密码登录
- 配置别名

> 提示：有关SSH的配置信息都保存在用户家目录下的`.ssh`目录下

1）免密码登录：

步骤：

- 配置公钥
  - 执行 `ssh-keygen` 即可生成SSH钥匙，一路回车即可
- 上传公钥到服务器
  - 执行`ssh-copy-id -p port user@remote`，可以让远程服务器记住我们的公钥

**本地** 使用 **私钥**（id_rsa） 对数据进行**加密/解密**

**服务器** 使用 **公钥**（id_rsa.pub） 对数据进行**加密/解密**

> 非对称加密算法：
>
> - 使用 **公钥** 加密的数据，需要使用 **私钥** 解密
> - 使用 **私钥** 加密的数据，需要使用 **公钥** 解密

2）配置别名：

每次都输入`ssh -p port user@remote`，时间久了会觉得很麻烦，特别是当`user`，`remote`，和`port`都得输入，而且还不好记忆

而配置别名可以让我们进一步偷懒，譬如使用：`ssh mac` 来替代上面一长串，那么就在 `~/.ssh/config` 里面追加以下内容：

```txt
Host mac
	HostName ip地址
	User Kaku
	Port 22
```

保存之后，即可使用`ssh mac`实现远程登录了，`scp`同样可以使用



---

## 用户权限

### 用户，权限和组的基本概念

- **用户**是Linux系统工作重要的一环，用户包括 **用户** 与 **组** 管理
- 在Linux系统中，不论是由本机或是远程登录系统，每个系统都**必须拥有一个账号**，并且对于**不同的系统资源拥有不同的使用权限**
- 在Linux中，可以指定**每一个用户** 针对 **不同的文件或者目录** 的 **不同权限**
- 对**文件/目录**的权限包括：

| 权限 |  英文  | 缩写 | 数字代号 |
| :--: | :----: | :--: | :------: |
|  读  |  read  |  r   |    4     |
|  写  | write  |  w   |    2     |
| 执行 | excute |  x   |    1     |

**组**：为了方便用户管理，提出了 组 的概念，在实际应用中，可以预先针对 **组** 设置好权限，然后将不同的用户添加到相应的组中，从而不用依次为每一个用户设置权限

### ls -l 扩展

- `ls -l` 可以查看文件夹下文件的详细信息，从左到右依次为：
  - **权限**：第1个字符如果是`d`表示目录
  - **硬链接数**：通俗地讲，就是有多少种方式，可以访问到当前目录/文件
  - **拥有者**：家目录下 文件/目录 的拥有者通常都是当前用户
  - **组**：在Linux中，很多时候，会出现组名和用户名相同的情况
  - **大小**
  - **时间**
  - **名称**

|                  | 目录 |      | 拥有者权限 |      |      | 组权限 |      |      | 其他用户权限 |      |
| :--------------: | :--: | :--: | :--------: | :--: | :--: | :----: | :--: | :--: | :----------: | ---- |
| **文件**权限示例 |  -   |  r   |     w      |  -   |  r   |   w    |  -   |  r   |      -       | -    |
| **目录**权限示例 |  d   |  r   |     w      |  x   |  r   |   w    |  x   |  r   |      -       | x    |

### chmod简单实用

- chmod可以修改 **用户/组** 对 **文件/目录**的权限
- 命令格式如下：

```shell
chmod +/-rwx 文件名|目录名
# +/-：表示增加/减少权限
```

> 提示：以上方式会一次性修改 拥有者/组 权限

###   超级用户

- Linux系统中的`root`账号通常**用于系统的维护与管理**，对操作系统的所有资源**具有所有访问的权限**
- 在大多数版本的Linux中，都不推荐 **直接使用`root` 账号登录系统**
- 在Linux 安装的过程中，系统会自动创建一个用户账号，而这个默认的用户就称为“标准用户

**sudo**：

- `su`是`substitute user`的缩写，表示 **使用另一个用户的身份**
- `sudo`命令用来以其他身份来执行命令，预设的身份是`root`
- 用户使用`sudo`时，必须先输入密码，之后有**5分钟的有效期限**，超过期限则必须重新输入密码

> 若其未经授权的用户企图使用sudo，则会发出警告邮件给管理员



---

## 组管理 终端命令

> 提示：创建组/删除组 的终端命令都需要通过sudo执行

|             命令             |           作用            |
| :--------------------------: | :-----------------------: |
|        groupadd  组名        |          添加组           |
|        groupdel  组名        |          删除组           |
|       cat  /etc/group        |       确认组的信息        |
| chgrp  -R  组名  文件/目录名 | 递归修改文件/目录的所属组 |

> 提示：
>
> 组信息保存在 `/etc/group` 文件中
>
> `/etc`目录是专门用来保存 **系统配置信息** 的目录

- 在实际应用中，可以预先针对 **组** 设置好权限，然后**将不同的用户添加到对应的组中**，从而**不用依次为每一个用户设置权限**

---

## 用户管理 终端命令

> 提示：创建用户/删除用户/修改其他用户密码 的终端命令都需要通过sudo执行

### 创建用户/设置密码/删除用户

|                命令                | 作用         | 说明                                                         |
| :--------------------------------: | :----------- | :----------------------------------------------------------- |
|  useradd  -m  -g  组  新建用户名   | 添加新用户   | -m  自动建立用户家目录<br />-g  指定用户所在的组，否则会建立一个和用户名同名的组 |
|           passwd  用户名           | 设置用户密码 | 如果是普通用户，直接用passwd可以修改自己的密码               |
|        userdel  -r  用户名         | 删除用户     | -r  选项会自动删除用户家目录                                 |
| cat  /etc/passwd  \|  grep  用户名 | 确认用户信息 |                                                              |

> 提示：
>
> - 创建用户时，如果忘记添加 -m 选项指定新用户的家目录——最简单的方法是**删除用户，重新创建**
> - 创建用户时，默认会创建一个和**用户名**同名的**组名**
> - 用户信息保存在`/etc/passwd` 文件中

查看用户信息  id ，who，whoami

|     命令     | 作用                                           |
| :----------: | ---------------------------------------------- |
| id  [用户名] | 查看用户 UID（用户代号） 和 GID（组代号） 信息 |
|     who      | 查看当前所有登录的用户列表                     |
|    whoami    | 查看当前登录用户的账户名                       |

**passwd文件**

`/etc/passwd` 文件存放的是用户的信息，由6个分号组成的7个信息，分别是

> 1.用户名
>
> 2.密码（x，表示加密的密码）
>
> 3.UID（用户标识）
>
> 4.GID（组标识）
>
> 5.用户全名或本地账号
>
> 6.家目录
>
> 7.登录使用的shell，就是登录之后，使用的终端命令，`ubuntu`默认是`dash`（ubuntu认为dash效率更高，但是dash在windows的XShell软件中有严重缺陷，例如向上，向下，会显示乱码^[[A ^H，使用并不方便）

**usermod**

- `usermod`可以用来设置**用户**的**主组/附加组** 和 **登录shell**，命令格式如下：
- **主组**：通常在新用户时指定，在`etc/passwd` 的第4列**GID对应的组**
- **附加组**：在`etc/group` 中最后一列表示该组的用户列表，用于指定 **用户的附加权限**

> 提示：设置了用户的附加组之后，需要重新登录才能生效！

```shell
# 修改用户的主组（passwd 中的GID）
usermod -g 组 用户名
# 修改用户的附加组
usermod -G 组 用户名
# 修改用户登录shell
usermod -s /bin/bash 用户名
```

> 注意：默认使用`useradd`添加的用户是没有权限使用`sudo`以`root`身份执行命令的，可以使用以下命令，将用户添加到`sudo`附加组中

```shell
usermod -G sudo 用户名
```

**which（重要）**

> 提示
>
> - `/etc/passwd` 是用于保存用户信息的文件
> - `/usr/bin/passwd` 是用于修改用户密码的程序

`which` 命令可以查看执行命令所在的位置

```shell
which ls

# 输出
# /bin/ls

which useradd

# 输出
# /usr/sbin/useradd
```

`bin` 和 `sbin`

- 在Linux中，绝大多数可执行文件都是保存在`/bin`，`/sbin`，`/usr/bin`，`/usr/sbin`
- `/bin`（binary）是二进制执行文件目录，主要用于具体应用
- `/sbin`（system binary）是系统管理员专用的二进制代码存放目录，主要用于系统管理
- `/usr/bin`（user commands for application）后期安装的一些软件
- `/usr/sbin`（super user commands for application）超级用户的一些管理程序

> 提示
>
> - `cd` 这个终端命令是内置在系统内核中的，没有独立的文件，因此用 `which` 无法找到`cd` 命令的位置

### 切换用户

|     命令      | 作用                   | 说明                                     |
| :-----------: | :--------------------- | :--------------------------------------- |
| su  -  用户名 | 切换用户，并且切换目录 | - 可以切换到用户家目录，否则保持位置不变 |
|     exit      | 退出当前登陆账户       |                                          |

- su 不接用户名， 可以切换到root，但是不推荐使用，因为不安全
- exit 可以退出当前用户的shell

### 修改文件权限

| 命令  | 作用       |
| :---: | ---------- |
| chown | 修改拥有者 |
| chgrp | 修改组     |
| chmod | 修改权限   |

- 命令格式如下：

```shell
# 修改文件|目录的拥有者
chown 用户名 文件名|目录名

# 递归修改文件|目录的组
chgrp -R 组名 文件名|目录名

# 递归修改文件权限
chmod -R 755 文件名|目录名
```

- `chmod`在设置权限时，可以简单的使用三个数字分别对应 **拥有者 / 组** 和 **其他** 用户的权限

```shell
# 直接修改文件|目录的 读|写|执行 权限，但是不能精确到 拥有者|组|其他
chmod +/-rwx 文件名|目录名
```

|      | 拥有者 |      |      |  组  |      |      | 其他 |      |
| :--: | :----: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
|  r   |   w    |  x   |  r   |  w   |  x   |  r   |  w   |  x   |
|  4   |   2    |  1   |  4   |  2   |  1   |  4   |  2   |  1   |

上表每三个数字相加的结果就是755中一个数字的结果，如下表：

|      |      |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- |
| 4    | 2    | 1    |      | 7    | rwx  |
| 4    | 2    | 0    |      | 6    | rw-  |
| 4    | 0    | 1    |      | 5    | r-x  |
| 4    | 0    | 0    |      | 4    | r--  |
| 0    | 2    | 1    |      | 3    | -wx  |
| 0    | 2    | 0    |      | 2    | -w-  |
| 0    | 0    | 1    |      | 1    | --x  |
| 0    | 0    | 0    |      | 0    | ---  |

常用数字组合有（u表示用户/g表示组/o表示其他）：

- 777 ---> u=rwx，g=rwx，o=rwx
- 755 ---> u=rwx，g=rx，o=rx
- 644 ---> u=rw，g=r，o=r



## 系统信息相关命令

主要是为了方便通过远程终端维护服务器时，查看服务器上当前 **系统时间和日期/磁盘空间/占用情况/程序执行情况**

### 时间和日期 dat，cal

| 命令 | 作用                                         |
| :--: | -------------------------------------------- |
| cal  | calendar 查看日历，-y 选项可以查看一年的日历 |
| date | 查看系统时间                                 |

### 磁盘和空间 df，du

|       命令       | 作用                                                         |
| :--------------: | ------------------------------------------------------------ |
|      df  -h      | disk free 显示磁盘剩余空间                                   |
| du  -h  [目录名] | disk usage 显示目录下的文件大小，-h 选项 以人性化的方式显示文件大小 |

### 进程信息 ps，top，kill

|         命令         | 作用                                    |
| :------------------: | --------------------------------------- |
|       ps  aux        | process status 查看进程的详细状况       |
|         top          | 动态显示运行中的进程并且排序            |
| kill  [-9]  进程代号 | 终止指定代号的进程，**-9** 表示强行终止 |

> ps 默认只会显示当前用户通过终端启动的应用程序

`ps`选项功能说明

| 选项 | 含义                                     |
| ---- | ---------------------------------------- |
| a    | 显示终端上的所有进程，包括其他用户的进程 |
| u    | 显示进程的详细状态                       |
| x    | 显示没有控制终端的进程                   |

> 提示： 使用`kill`命令时，最好只终止由当前用户开启的进程，而不要终止`root`身份开启的进程，否则可能导致系统崩溃
>
> - 要退出`top`，可以直接输入`q`

## 其他命令

### 查找文件  find

find命令功能非常强大，通常用来在特定的目录下 搜索 符合条件的文件

|            命令             | 作用                                        |
| :-------------------------: | ------------------------------------------- |
| find  [目录]  -name  "*.py" | 查找指定路径下扩展名为.py的文件，包括子目录 |

- 如果省略路径，表示在当前文件夹下查找
- 之前学习的通配符，在使用`find`命令时同时可用

### 软链接  ln  -s

|               命令               | 作用                                                         |
| :------------------------------: | ------------------------------------------------------------ |
| ln  -s  被链接的源文件  链接文件 | 建立文件的软链接，用通俗的方式讲 **类似于 Windows下的快捷方式** |

> 注意：
>
> 1.没有 -s 选项建立的是一个 **硬链接文件**
>
> - 两个文件占用相同大小的硬盘空间，**工作中几乎不会建立文件的硬链接**
>
> 2.**源文件要使用绝对路径**，不能使用相对路径，这样可以方便移动链接文件后，仍然能正常使用

 **硬链接简介**

在使用`ln`创建链接时，如果没有`-s`选项，会创建一个硬链接，而不是软链接

> 软链接，硬链接区别：
>
> 在Linux中，**文件名**和**文件的数据**是分开存储的，保存在不同位置，但是可以通过**文件名**访问**文件数据**，，**软链接文件数据**保存着链接到源文件的完整路径，可通过这个路径访问到被链接的文件存储的文件数据。
>
> **硬链接**与**文件名**指向同一块文件数据，若删除**文件名**，依然可以通过**硬链接**访问**文件数据**

提示：

- 在Linux中，只有文件的 `硬链接==0` 才会被删除
- 使用 `ls -l` 可以查看一个文件的硬链接的数量
- 在日常工作中，几乎不会建立文件的硬链接，知道即可

### 打包 / 解包  tar

在不同操作系统中，常用的打包压缩方式不同，`windows`常用`rar`，`Mac`常用`zip`，`Linux`常用`tar.gz`

tar是Linux中最常用的 备份 工具，此命令可以把一系列文件打包到一个大文件中，也可以把一个打包的大文件恢复成一系列文件

```shell
# 打包文件
tar -cvf 打包文件.tar 被打包的文件/路径...

# 解包文件
tar -xvf 打包文件.tar
```



| 选项 | 含义                                                         |
| :--: | ------------------------------------------------------------ |
|  c   | 生成档案文件，创建打包文件                                   |
|  x   | 解开档案文件                                                 |
|  v   | 列出归档接档的详细过程，显示进度                             |
|  f   | 指定档案文件名称，f 后面一定是 .tar文件，所以必须放在选项最后 |

> 注意：`f` 选项必须放在最后面，其他选项顺序可以随意

### 压缩 / 解压缩  gzip，bzip2

**1）gzip**

`tar` 和 `gzip` 命令结合可以使用实现文件 打包和压缩

- `tar` 只负责打包文件，但不压缩
- 用`gzip` 压缩`tar`打包后的文件，其扩展名一般用 `xxx.tar.gz`

> 在Linux中，最常见的压缩文件格式就是 `xxx.tar.gz`

在 tar命令中有一个选项 `-z` 可以调用gzip，从而可以方便的实现压缩和解压的功能，命令格式如下：

```shell
# 压缩文件
tar -zcvf 打包文件.tar.gz 被压缩的文件/路径...

# 解压缩文件
tar -zxvf 打包文件.tar.gz

# 解压缩到指定路径
tar -zxvf 打包文件.tar.gz -C 目标文件
```

| 选项 | 含义                                           |
| ---- | ---------------------------------------------- |
| -C   | 解压缩到指定目录，注意：要解压缩的目录必须存在 |

2）bzip2（two）

`tar`与`bzip2`命令结合可以实现文件 打包和压缩（用法和gzip一样）

- `tar`只负责打包文件，但不压缩
- 用`bzip2`压缩`tar`打包后的文件，其扩展名一般用xxx.tar.bz2

在tar命令中有一个选项 `-j` 可以调用 bzip2，从而可以方便的实现压缩和解压缩的功能

命令格式如下：

```shell
# 压缩文件
tar -jcvf 打包文件.tar.bz2 被压缩的文件/路径...

# 解压缩文件
tar -jxvf 打包文件.tar.bz2
```

### 软件安装  apt

通过apt安装/卸载软件

-  apt是`Advanced Packaging Tool`，是Linux下的一款安装包管理工具
- 可以在终端中方便的 **安装/卸载/更新软件包**

```shell
# 1.安装软件
sudo apt install 软件包

# 2.卸载软件
sudo apt remove 软件名

# 3.更新已安装的包
sudo apt upgrade
```

### 配置软件源

如果希望在ubuntu中安装软件，更加快速，可以通过设置镜像源，选择一个访问网速更快的服务器，来提供软件下载/安装服务，提示：更换服务器后，需要一个相对比较长时间的更新过程，需要耐心等待。更新完成之后，再安装软件都会从新设置的服务器下载软件了

> 所谓的镜像源就是所有服务器的内容都是相同的（镜像），但是根据所在位置不同，国内服务器通常速度会更快一些！（清华镜像服务器，阿里镜像服务器，搜狐镜像服务器）
